{% extends 'spoken/templates/base.html' %}
{% load cmsdata %}
{% load static %}
{% load creationdata %}
{% block cssblock %}
    <link href="{% static 'spoken/css/video-js.min.css' %}" rel="stylesheet" type="text/css">
    <style>
        #st_video, #st_video_html5_api{
            width: 100%;
        }
        #st_video {
            max-height: 398px;
        }
        #st_video_html5_api {
            max-height: 392px;
        }
        .banner-img-container{
            position: relative;
            overflow: hidden;
        }
        .banner-img-container .go{
            position: absolute;
            top: 84.5%;
            right: 8%;
            
        }
    </style>
{% endblock %}
{% block title %}Home{% endblock %}
{% block heading %}{% endblock %}
{% block homealert %}
	{% if messages %}
		{% for message in messages %}
		    {% if message.tags == 'success' %}
			    <div class="alert alert-success alert-dismissable">
				    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				    {{ message|safe }}
			    </div>
			{% elif message.tags == 'warning' %}
			   <div class="alert alert-warning alert-dismissable">
				    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				    {{ message|safe }}
			    </div>
			{% elif message.tags == 'error' %}
			    <div class="alert alert-danger alert-dismissable">
				    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				    {{ message|safe }}
			    </div>
			{% elif message.tags == 'info' %}
			     <div class="alert alert-info alert-dismissable">
				    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				    {{ message|safe }}
			    </div>
			{% elif message.tags == 'debug' %}
			    <div class="alert alert-info alert-dismissable">
				    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				    {{ message|safe }}
			    </div>
			{% endif %}
		{% endfor %}
	{% endif %}
{% endblock %}

{% block banner %}
    <div class="page1">
        <div id="banner-wrapper">
            <div class="banner-img-container">
                <img class="col-lg-12 col-md-12 col-sm-12 col-xs-12 banner-img" src="/static/spoken/images/home-banner.jpg">
                <div class='go'>
                    <a href="/tutorial-search/" title="Search videos"><img class='go-image' src="/static/spoken/images/rounded-arrow.png"></a>
                </div>
            </div>
            <div class="banner-items col-lg-offset-2 col-md-offset-2 col-sm-offset-2 col-xs-offset-2 col-lg-8 col-md-8 col-sm-8 col-xs-8">
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                <a href="/software-training/" title="Software Training"><img class="banner-item" src="/static/spoken/images/1.jpg"></a>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                    <a href="/creation/" title="Spoken Tutorial Creation"><img class="banner-item" src="/static/spoken/images/2.jpg"></a>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                    <a href="http://forums.spoken-tutorial.org" title="Spoken Tutorial Forum" target="_blank"><img class="banner-item" src="/static/spoken/images/3.jpg"></a>
                </div>
            </div>
        </div>
        <div class="scroller">
            <ul class="list-unstyled">
                <li><a class="first" href="#page-wrapper"></a></li>
                <li><a class="second" href="#page2"></a></li>
                <li><a class="thired" href="#page3"></a></li>
                <li><a class="fourth" href="#page4"></a></li>
            </ul>
        </div>
    </div>
{% endblock %}
{% block content %}
    {% block alert %}
    {% endblock %}
    {% block page_title %}
    {% endblock %}
    <div id="page2" class="page2">
        <a href="#page2"></a>
        <div class="spacer"></div>
    <!-- testimonial start -->
        <div class="row">
            <div id="testimonials" class="inner">
                <h4 class='col-lg-12 col-md-12 col-sm-12 page-title'>Testimonials</h4>
                {% for record in testimonials %}
                    <div class="col-lg-6 col-md-6 col-sm-6 testimonial-item">
                        <div class="testimonial-content">
                            <i class="fa fa-quote-left pull-left" style="color:#e6e6e6;"></i>{{ record.minified_content|len_cutter:320 }} - <a href="/testimonials"> read </a><i class="fa fa-quote-right pull-right" style="color:#e6e6e6;"></i>
                        </div>
                        <div class="pull-left">
                            <div class="user-details">
                                <div class="caretr"></div>
                                <img width="30" height="30" src="/static/spoken/images/no-profile-image.jpg" />
                                {% if record.user_name %}
                                     {{ record.user_name }}
                                {% elif record.user.first_name %}
                                    {{ record.user.first_name }}
                                {% else %}
                                    {{ record.user.username }}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        <!-- testimonial end -->
        <!-- videos -->
        <div class="">
            <div id="home-video-container" class="container-inner row">
                <div class="col-lg-6 col-md-6 col-sm-6 big-video">
                    <video id="st_video" class="video-js vjs-default-skin" controls preload="auto" width="auto" height="auto" data-setup="{}">
                        <source src="{{ media_url }}videos/{{ tr_rec.tutorial_detail.foss_id }}/{{ tr_rec.tutorial_detail_id }}/{{ tr_rec.video }}" type="video/ogg" />
                    </video>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 video-lists">
                    {% for k, record in random_tutorials %}
                        <div class="video-item">
                            <div class="thump">
                                <a href="/watch/{{ record.tutorial_detail.foss.foss|get_url_name }}/{{ record.tutorial_detail.tutorial|get_url_name }}/{{ record.language }}">
                                    <img src="{{ record.tutorial_detail|get_thumb_path:'Small' }}">
                                    <div class="video-item-playlist">
                                    <h5> {{ record.tutorial_detail.foss.foss }} {{ k }} +</h5>
                                    </div>
                                </a>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- videos end -->
    </div>
    <div id="page3" class='page3 forum-container'>
        <a href="#page3"></a>
        <div class="spacer"></div>
        <div class="row">
            <div class="container-inner">
                <h4 class='col-lg-8 col-md-8 col-sm-8 page-title'>Forum</h4>
                <div class="col-lg-8 col-md-8 col-sm-8">
                    <div class="top-border">
                        <p class="justify">Spoken Tutorial Forums is a friendly online discussion forum.  You can join existing discussions or start new topics, and get lots of replies from the Spoken Tutorial community.   Registration to Forums is completely free and takes only one minute.</p>
			<p class="justify">Forums is very easy to use, even for computer newbies. It's very easy to format forum posts with fonts, colors, and many other options. You can attach files to your posts directly from your computer. You can give links to webpages or videos from other video websites.</p>

			<p class="justify">Be assured of an answer within 3 working days of posting your question. <a class="pull-right" href="http://forums.spoken-tutorial.org" target="_blank">Click here to proceed >></a></p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4">
                     <img  src="/static/spoken/images/forum.jpg">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="container-inner">
                <div class="col-lg-6 col-md-6 col-sm-6">
                    <h4 class='page-title'>News / Events</h4>
                    <div class="top-border"></div>
                    <div>
                        {% if events %}
                            {% for event in events %}
                                <div class="events">
                                    <div class="event-message">{{ event.body|safe }}</div>
                                    <br />
                                    <div class="pull-left">{{ event.event_date }}</div>
                                </div>
                            {% endfor %}
                            <br /> <a class="pull-right" href="#">Click more >></a>
                        {% else %}
                            Check out the amazing <a href="/testimonials" target="_blank">testimonials</a>, <a href="/news/article" target="_blank">media articles</a>, <a href="/news/news-and-events/" target="_blank">events</a>, <a href="/news/official-letters-and-links/" target="_blank">collaboration</a>, seminars, talks and campaigns about the Spoken Tutorial Project.   Browse through our gallery and see what the Project has been doing across India. 
                        {% endif %}
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6">
                    <h4 class='page-title'>Software Training</h4>
                    <div class="top-border"></div>
                    <div>
                        The Spoken Tutorial Project is about teaching and learning a particular FOSS (Free and Open Source Software) like Linux, Scilab, LaTeX, PHP & MySQL, Java, C/C++, LibreOffice etc. via an easy Video tool - Spoken Tutorials. <br /><br /> <a class="pull-right" href="http://process.spoken-tutorial.org/index.php/Software-Training" target="_blank" >Click more >></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="page4" class="page4">
        <a href="#page4"></a>
        <div class="spacer"></div>
        <div class="row">
            <div class="contact-container container-inner three-cols">
                <h2 class='page-title stay-middle'>Thanks for visiting us</h2>
                <div class="col-lg-4 col-md-4 col-sm-4 contact comfortaa">
                    <h4 class='page-title'>Contact</h4>
                    <div><span class="fa fa-2 fa-home"></span> Spoken Tutorial, IIT Bombay</div>
                    <div><span style="color:#008000" class="fa fa-2 fa-phone"></span> + 91 22 25764229 </div>
                    <div><span style="color:#bac88a" class="fa fa-2 fa-envelope"></span> contact [at] spoken-tutorial [dot] org</div>
                    <div><span style="color:#db2625" class="fa fa-2 fa-youtube"></span> <a href="http://www.youtube.com/user/SpokenTutorialIITB/" target="_blank">YouTube channel</a></div>
                    <div><span style="color:#dc4836" class="fa fa-2 fa-google-plus"></span> <a href="https://plus.google.com/114550410376641567079" target="_blank">Google+ page</a></div>
                    <div><span style="color:#00a5e1" class="fa fa-2 fa-skype"></span> st-iitb</div>
                    <!--<div><span class="fa fa-2 fa-twitter"></span> <a href="#">Twitter</a></div>-->
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 feedback">
                    <h4 class='page-title'>Feedback</h4>
                    <form name="ajaxform" id="ajaxform" class="form-horizontal" action="/site-feedback/" method="post">
                        <fieldset>
                            <!-- Name input-->
                            <div class="form-group feedback-name">
                                <label class="col-md-4 control-label comfortaa" for="name">Name</label>
                                <div class="col-md-8">
                                    <input id="name" name="name" type="text" placeholder="Your name" class="form-control">
                                </div>
                            </div>

                            <!-- Email input-->
                            <div class="form-group feedback-email">
                                <label class="col-md-4 control-label comfortaa" for="email">Your E-mail</label>
                                <div class="col-md-8">
                                    <input id="email" name="email" type="email" placeholder="Your email" class="form-control email">
                                </div>
                            </div>

                            <!-- Message body -->
                            <div class="form-group feedback-message">
                                <label class="col-md-4 control-label comfortaa" for="message">Your message</label>
                                <div class="col-md-8">
                                    <textarea class="form-control" id="message" name="message" placeholder="Please enter your message here..." rows="5"></textarea>
                                </div>
                            </div>

                            <!-- Form actions -->
                            <div class="form-group">
                                <div class="col-md-12 text-right">
                                    <button id="site-feedback" class="btn btn-default">Submit</button>
                                </div>
                            </div>
                        </fieldset>
                    </form>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 support-us">
                    <h4 class='page-title'>Collaborate with Us</h4>
                    <div class='collaborate'>
                        <p>We invite you to become a part of this amazing journey of making India IT-literate.  Join our growing network of Resources Centres, Organisers, Content creators, Domain Experts, Translators, Dubbers, Reviewers and help us to reach every nook and corner of India.</p><p>First step to do so - fill the form given <a href="/creation/collaborate/">here</a>.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block jsblock %}
    <script src="static/spoken/js/jquery.easing.1.3.js"></script> 
    <script src="{% static 'spoken/js/video.js' %}"></script>
    <script>
        $(document).ready(function(){
            //$('.banner-img').css({'width': $( window ).width()});
            setGoImageWith();
            $('.video-lists .video-item .thump').hover(function(){
                //console.log($(this).find('.video-item-playlist'));
                $(this).find('.video-item-playlist').slideToggle();
            });
            
        });
        $(window).bind("load", function() {
           setGoImageWith();
        });
        function setGoImageWith(){
            imgWidth = (10*$('.banner-img').height())/ 100
            $('.go-image').css({'width' : imgWidth});
        }
        $( window ).resize(function() {
            setGoImageWith();
        });
        
        $(function(){
            // catch all a clicks
            $('a').click(function(){
                // check if has hash
                if(this.hash){
                    // get rid of the # sign
                    var hash  = this.hash.substr(1);
                    console.log(hash);
                    // get the position of the <a name>
                    var $toElement = $("div[id="+hash+"]");
                    console.log($toElement);
                    var toPosition = $toElement.offset().top;
                    
                    //scroll / animate to that element
                    $("body, html").animate({
                        scrollTop : toPosition
                    }, 2000, "easeOutExpo");
                    
                    // don't to the jump'
                    return false;
                }
            });
            if(location.hash){
                var hash = location.hash;
                console.log(hash);
                window.scroll(0,0);
                $("a[href="+hash+"]").click();
            }
            
            //callback handler for form submit
            $("#ajaxform").submit(function(e)
            {
                var postData = $(this).serializeArray();
                var formURL = $(this).attr("action");
                console.log(postData[0].value);
                var error = 1
                if (postData[0].value == ''){
                    error = 0
                    $('.feedback-name').addClass('has-error');
                    
                }else{
                    $('.feedback-name').removeClass('has-error');
                }
                if (postData[1].value == ''){
                    error = 0
                    $('.feedback-email').addClass('has-error');
                    
                }else{
                    $('.feedback-email').removeClass('has-error');
                }
                if (postData[2].value == ''){
                    error = 0
                    $('.feedback-message').addClass('has-error');
                    
                }else{
                     $('.feedback-message').removeClass('has-error');
                }
                if(error) {
                    $.ajax(
                    {
                        url : formURL,
                        type: "POST",
                        data : postData,
                        success:function(data, textStatus, jqXHR)
                        {
                            if(data){
                                //data: return data from server
                                $('.alert-success').remove();
                                message = '<div class="alert alert-success alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button> Thank you for your valuable feedback.</div>';
                                $('#page4 .contact-container h2').after(message);
                                document.getElementById("ajaxform").reset();
                                //location.reload();
                            } else{
                                $('.alert-danger').remove();
                                message = '<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button> Something went wrong, will get back soon..</div>';
                                $('#page4 .contact-container h2').after(message);
                                document.getElementById("ajaxform").reset();
                            }
                                
                        },
                        error: function(jqXHR, textStatus, errorThrown)
                        {
                            //if fails     
                        }
                    });
                }
                e.preventDefault(); //STOP default action
                //e.unbind(); //unbind. to stop multiple form submit.
            });
             
            //$("#ajaxform").submit(); //Submit  the FORM
            
            /* announcement */
            /* var stop = 1
            $('#slideshow').hover(function(){
		        stop = 0
	        }, function(){
		        stop = 1
	        });
            if($(".announcement").length > 1){
			    $("#slideshow > div:gt(0)").hide();
			    setInterval(function() {
			      if(stop){
			          $('#slideshow > div:first')
			            .fadeOut(0)
			            .next()
			            .fadeIn(0)
			            .end()
			            .appendTo('#slideshow');
			         }
			    },  5000);
			}
            $('.close').click(function(){
                $(".navbar-fixed-top").css({'top' : '0px', 'position' : 'fixed'});
                $("#header-wrapper").css({'height' : '0px'});
            }); */
        });
    </script>
{% endblock %}
