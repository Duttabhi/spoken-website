{% extends 'spoken/templates/base.html' %}
{% load cmsdata %}
{% block title %}Home{% endblock %}
{% block heading %}{% endblock %}
{% block homealert %}
	{% if messages %}
		{% for message in messages %}
		    {% if message.tags == 'success' %}
			    <div class="alert alert-success alert-dismissable">
				    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				    {{ message|safe }}
			    </div>
			{% elif message.tags == 'warning' %}
			   <div class="alert alert-warning alert-dismissable">
				    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				    {{ message|safe }}
			    </div>
			{% elif message.tags == 'error' %}
			    <div class="alert alert-danger alert-dismissable">
				    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				    {{ message|safe }}
			    </div>
			{% elif message.tags == 'info' %}
			     <div class="alert alert-info alert-dismissable">
				    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				    {{ message|safe }}
			    </div>
			{% elif message.tags == 'debug' %}
			    <div class="alert alert-info alert-dismissable">
				    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				    {{ message|safe }}
			    </div>
			{% endif %}
		{% endfor %}
	{% endif %}
{% endblock %}

{% block banner %}
    <div class="page1">
        <div id="banner-wrapper">
            <img class="banner-img" src="/static/spoken/images/home-banner.jpg">
            <div class="banner-items col-sm-offset-2 col-sm-8">
                <div class="col-sm-4">
                    <img class="banner-item" src="/static/spoken/images/1.jpg">
                </div>
                <div class="col-sm-4">
                    <img class="banner-item" src="/static/spoken/images/2.jpg">
                </div>
                <div class="col-sm-4">
                    <img class="banner-item" src="/static/spoken/images/3.jpg">
                </div>
            </div>
        </div>
        <div class="scroller">
            <ul class="list-unstyled">
                <li><a class="first" href="#page-wrapper"></a></li>
                <li><a class="second" href="#page2"></a></li>
                <li><a class="thired" href="#page3"></a></li>
                <li><a class="fourth" href="#page4"></a></li>
            </ul>
        </div>
    </div>
{% endblock %}
{% block content %}
    {% block alert %}
    {% endblock %}
    {% block page_title %}
    {% endblock %}
    <div id="page2" class="page2">
        <a href="#page2"></a>
        <div class="spacer"></div>
    <!-- testimonial start -->
        <div class="row">
            <div id="testimonials" class="inner">
                <h4 class='page-title'>Testimonials</h4>
                {% for record in testimonials %}
                    <div class="col-lg-6 col-md-6 col-sm-6 testimonial-item">
                        <div class="testimonial-content">
                            <i class="fa fa-quote-left pull-left" style="color:#e6e6e6;"></i>{{ record.minified_content|len_cutter:320 }} - <a href="#"> read </a><i class="fa fa-quote-right pull-right" style="color:#e6e6e6;"></i>
                        </div>
                        <div class="pull-left">
                            <div class="user-details">
                                <div class="caretr"></div>
                                <img width="30" height="30" src="/static/spoken/images/no-profile-image.jpg" />
                                {% if record.user.first_name %}
                                    {{ record.user.first_name }}
                                {% else %}
                                    {{ record.user.username }}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        <!-- testimonial end -->
        <!-- videos -->
        <div class="row">
            <div id="home-video-container" class="container-inner">
                <div class="col-lg-5 col-md-5 col-sm-5 big-video">
                    <video id="st_video" class="col-lg-12 col-md-12 col-sm-12 video-js vjs-default-skin" controls preload="auto" width="auto" height="auto" data-setup="{}">
                        <source src="{{ media_url }}videos/{{ tr_rec.tutorial_detail.foss_id }}/{{ tr_rec.tutorial_detail_id }}/{{ tr_rec.video }}" type="video/ogg" />
                    </video>
                </div>
                <div class="col-lg-7 col-md-7 col-sm-7 video-lists">
                    <div class="video-item">
                        <div class="thump">
                            <img src="http://www.spoken-tutorial.org/sites/default/files/thumb-even.png">
                            <div class="video-item-playlist">
                            <h5>Linux 50 +</h5>
                            </div>
                        </div>
                    </div>
                    <div class="video-item">
                        <div class="thump">
                            <img src="http://www.spoken-tutorial.org/sites/default/files/thumb-even.png">
                            <div class="video-item-playlist">
                            <h5>Linux 50 +</h5>
                            </div>
                        </div>
                    </div>
                    <div class="video-item">
                        <div class="thump">
                            <img src="http://www.spoken-tutorial.org/sites/default/files/thumb-even.png">
                            <div class="video-item-playlist">
                            <h5>Linux 50 +</h5>
                            </div>
                        </div>
                    </div>
                    <div class="video-item">
                        <div class="thump">
                            <img src="http://www.spoken-tutorial.org/sites/default/files/thumb-even.png">
                            <div class="video-item-playlist">
                            <h5>Linux 50 +</h5>
                            </div>
                        </div>
                    </div>
                    <div class="video-item">
                        <div class="thump">
                            <img src="http://www.spoken-tutorial.org/sites/default/files/thumb-even.png">
                            <div class="video-item-playlist">
                            <h5>Linux 50 +</h5>
                            </div>
                        </div>
                    </div>
                    
                    <div class="video-item">
                        <div class="thump">
                            <img src="http://www.spoken-tutorial.org/sites/default/files/thumb-even.png">
                            <div class="video-item-playlist">
                            <h5>Linux 50 +</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- videos end -->
    </div>
    <div id="page3" class='page3 forum-container'>
        <a href="#page3"></a>
        <div class="spacer"></div>
        <div class="row">
            <div class="container-inner">
                <h4 class='col-lg-8 col-md-8 col-sm-8 page-title'>Forum</h4>
                <div class="col-lg-8 col-md-8 col-sm-8">
                    <div class="top-border">
                        <p class="justify">Spoken Tutorial Forums is a friendly online discussion forum.  You can join existing discussions or start new topics, and get lots of replies from the Spoken Tutorial community.   Registration to Forums is completely free and takes only one minute.</p>
			<p class="justify">Forums is very easy to use, even for computer newbies. It's very easy to format forum posts with fonts, colors, and many other options. You can attach files to your posts directly from your computer. You can give links to webpages or videos from other video websites.</p>

			<p class="justify">Be assured of an answer within 3 working days of posting your question. <br /><br /> <a class="pull-right" href="#">Continue Forum >></a></p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4">
                     <img  src="/static/spoken/images/forum.jpg">
                </div>
            </div>
        </div>
        <div class="row">
            <div class="container-inner">
                <div class="col-lg-6 col-md-6 col-sm-6">
                    <h4 class='page-title'>News / Events</h4>
                    <div class="top-border"></div>
                    <div>
                        {% for event in events %}
                            <div class="events">
                                <div class="event-message">{{ event.message }}</div>
                                <br />
                                <div class="pull-left">{{ event.event_date }}</div>
                            </div>
                        {% endfor %}
                        <br /> <a class="pull-right" href="#">Click more >></a>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6">
                    <h4 class='page-title'>Software Training</h4>
                    <div class="top-border"></div>
                    <div>
                        .... <br /><br /> <a class="pull-right" href="#">Click more >></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="page4" class="page4">
        <a href="#page4"></a>
        <div class="spacer"></div>
        <div class="row">
            <div class="contact-container container-inner three-cols">
                <h2 class='page-title stay-middle'>Thanks for visiting us</h2>
                <div class="col-lg-4 col-md-4 col-sm-4 contact">
                    <h4 class='page-title'>Contact</h4>
                    <div><span class="fa fa-2 fa-home"></span> IIT Powai</div>
                    <div><span class="fa fa-2 fa-phone"></span> + 91 22 484900 </div>
                    <div><span class="fa fa-2 fa-envelope"></span> contact [at] spoken-tutorial [dot] org</div>
                    <div><span class="fa fa-2 fa-skype"></span> <a href="#">Skype</a></div>
                    <div><span class="fa fa-2 fa-twitter"></span> <a href="#">Twitter</a></div>
                    <div><span class="fa fa-2 fa-facebook-square"></span> <a href="#">Facebook</a></div>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 feedback">
                    <h4 class='page-title'>Feedback</h4>
                    <form name="ajaxform" id="ajaxform" class="form-horizontal" action="/site-feedback/" method="post">
                        <fieldset>
                            <!-- Name input-->
                            <div class="form-group feedback-name">
                                <label class="col-md-4 control-label" for="name">Name</label>
                                <div class="col-md-8">
                                    <input id="name" name="name" type="text" placeholder="Your name" class="form-control">
                                </div>
                            </div>

                            <!-- Email input-->
                            <div class="form-group feedback-email">
                                <label class="col-md-4 control-label" for="email">Your E-mail</label>
                                <div class="col-md-8">
                                    <input id="email" name="email" type="email" placeholder="Your email" class="form-control email">
                                </div>
                            </div>

                            <!-- Message body -->
                            <div class="form-group feedback-message">
                                <label class="col-md-4 control-label" for="message">Your message</label>
                                <div class="col-md-8">
                                    <textarea class="form-control" id="message" name="message" placeholder="Please enter your message here..." rows="5"></textarea>
                                </div>
                            </div>

                            <!-- Form actions -->
                            <div class="form-group">
                                <div class="col-md-12 text-right">
                                    <button id="site-feedback" class="btn btn-default">Submit</button>
                                </div>
                            </div>
                        </fieldset>
                    </form>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 support-us">
                    <h4 class='page-title'>Collaborate with Us</h4>
                    <div>
                        ....
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block jsblock %}
    <script src="static/spoken/js/jquery.easing.1.3.js"></script> 
    <script>
        $(document).ready(function(){
            $('.banner-img').css({'width': $( window ).width()});
        });
        $(function(){
            // catch all a clicks
            $('a').click(function(){
                // check if has hash
                if(this.hash){
                    // get rid of the # sign
                    var hash  = this.hash.substr(1);
                    console.log(hash);
                    // get the position of the <a name>
                    var $toElement = $("div[id="+hash+"]");
                    console.log($toElement);
                    var toPosition = $toElement.offset().top;
                    
                    //scroll / animate to that element
                    $("body, html").animate({
                        scrollTop : toPosition
                    }, 2000, "easeOutExpo");
                    
                    // don't to the jump'
                    return false;
                }
            });
            if(location.hash){
                var hash = location.hash;
                console.log(hash);
                window.scroll(0,0);
                $("a[href="+hash+"]").click();
            }
            
            //callback handler for form submit
            $("#ajaxform").submit(function(e)
            {
                var postData = $(this).serializeArray();
                var formURL = $(this).attr("action");
                console.log(postData[0].value);
                var error = 1
                if (postData[0].value == ''){
                    error = 0
                    $('.feedback-name').addClass('has-error');
                    
                }else{
                    $('.feedback-name').removeClass('has-error');
                }
                if (postData[1].value == ''){
                    error = 0
                    $('.feedback-email').addClass('has-error');
                    
                }else{
                    $('.feedback-email').removeClass('has-error');
                }
                if (postData[2].value == ''){
                    error = 0
                    $('.feedback-message').addClass('has-error');
                    
                }else{
                     $('.feedback-message').removeClass('has-error');
                }
                if(error) {
                    $.ajax(
                    {
                        url : formURL,
                        type: "POST",
                        data : postData,
                        success:function(data, textStatus, jqXHR)
                        {
                            if(data){
                                //data: return data from server
                                $('.alert-success').remove();
                                message = '<div class="alert alert-success alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button> Thank you for your valuable feedback.</div>';
                                $('#page4 .contact-container h2').after(message);
                                document.getElementById("ajaxform").reset();
                                //location.reload();
                            } else{
                                $('.alert-danger').remove();
                                message = '<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button> Something went wrong, will get back soon..</div>';
                                $('#page4 .contact-container h2').after(message);
                                document.getElementById("ajaxform").reset();
                            }
                                
                        },
                        error: function(jqXHR, textStatus, errorThrown)
                        {
                            //if fails     
                        }
                    });
                }
                e.preventDefault(); //STOP default action
                //e.unbind(); //unbind. to stop multiple form submit.
            });
             
            //$("#ajaxform").submit(); //Submit  the FORM
        });
    </script>
{% endblock %}
