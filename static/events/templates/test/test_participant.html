{% extends 'spoken/templates/base.html' %}
{% load widget_tweaks %}
{% load static %}
{% load mdldata %}
{% block title %}Participants List{% endblock %}
{% block cssblock %}<link rel="stylesheet" href="{% static 'spoken/css/chosen.min.css' %}" type="text/css" media="screen" charset="utf-8" />{% endblock %}
{% block heading %}
        <i class="fa fa-list-ul"></i> Participants List<a href="{{ request.META.HTTP_REFERER }}" class='pull-right'>Go Back</a>
{% endblock %}
{% block content %}
    <div class="bs-callout bs-callout-info">
        <dl class='dl-horizontal'>
            <dt>Institution Name</dt>
            <dd>{{ test.academic }}, {{ test.academic.state }}</dd>
            <dt>Foss</dt>
            <dd>{{ test.foss.foss }}</dd>
            <dt>Date</dt>
            <dd>{{ test.tdate }}</dd>
            <dt>Participants Count</dt>
            <dd>{{ collection|length }}</dd>
            <dt>Organiser</dt>
            <dd>{{ test.organiser }}</dd>
        </dl>
    </div>
	<div class="" id="pending">
		{% if collection %}
		<table class="table table-striped table-hover table-bordered">
			<tr>
				<th>First Name</th>
				<th>Last Name</th>
				<th>Score</th>
			</tr>
			{% for record in collection %}
				<tr>
					<td>{{ record.firstname }}</td>
					<td>{{ record.lastname }}</td>
					{% with grade=test.id|get_participant_mark:record.id %}
					    {% if grade %}
                            {% if grade >= 40 %}
                                <td>{{ grade }}% (Pass) - <a href="{% url 'events:test_participant_ceritificate' test.id record.id %}">Certificate</a></td>
                            {% else %}
                                <td>{{ grade }} (Fail)</td>
                            {% endif %}
                        {% else %}
                            <td></td>
                        {% endif %}
                    {% endwith %}
				</tr>
			{% endfor %}
		</table>
		{% else %}
			<p class="no-record">No student found!</p>
		{% endif %}
	</div>
{% endblock %}
