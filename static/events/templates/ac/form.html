{% extends 'spoken/templates/base.html' %}
{% load widget_tweaks %}
{% load static %}
{% block title %}Upload Tutorial{% endblock %}
{% block cssblock %}<link rel="stylesheet" href="{% static 'spoken/css/chosen.min.css' %}" type="text/css" media="screen" charset="utf-8" />{% endblock %}
{% if alert_success or alert_danger %}
	{% block alert %}
		{% if alert_success %}
			<div class="alert alert-success alert-dismissable">
				<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				{{ alert_success }}
			</div>
		{% endif %}
		{% if alert_danger %}
			<div class="alert alert-danger alert-dismissable">
				<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
				{{ alert_danger }}
			</div>
		{% endif %}
	{% endblock %}
{% endif %}
{% block content %}

<form action="{{ action }}" method="post">{% csrf_token %}
    {% if form.non_field_errors %}
    <ul>
      {% for error in form.non_field_errors %}
        <li>{{ error }}</li>
      {% endfor %}
    </ul>
    {% endif %}
	{% if edit %}
    	<h3 class="form-signin-heading">Edit Academic Center</h3>
    {% else %}
    	<h3 class="form-signin-heading">Add Academic Center</h3>
    {% endif %}
	<div class="form-group">
		<label for="id_state">State</label>
		{% render_field form.state class+="form-control chosen state" tabindex="1" data-placeholder="Choose state" %}
		{{ form.state.errors }}
	</div>
	<div class="form-group">
		<label for="id_university">University</label>
		{% render_field form.university class+="form-control chosen university" tabindex="1" data-placeholder="Choose university" %}
		{{ form.university.errors }}
	</div>
	<div class="form-group">
		<label for="id_institution_name">Institution Name</label>
		{% render_field form.institution_name class+="form-control institution_name" tabindex="1" data-placeholder="Enter institution name" %}
		{{ form.institution_name.errors }}
	</div>
	<div class="form-group">
		<label for="id_institution_type">Institute Type</label>
		{% render_field form.institution_type class+="form-control chosen institution_type" tabindex="1" data-placeholder="Choose Institution Type" %}
		{{ form.institution_type.errors }}
	</div>
	<div class="form-group">
		<label for="id_district">District</label>
		{% render_field form.district class+="form-control chosen district" tabindex="1" data-placeholder="Choose district" %}
		{{ form.district.errors }}
	</div><div class="form-group">
		<label for="id_location">Location</label>
		{% render_field form.location class+="form-control chosen location" tabindex="1" data-placeholder="Choose location" %}
		{{ form.location.errors }}
	</div>
	<div class="form-group">
		<label for="id_state">City</label>
		{% render_field form.city class+="form-control chosen city" tabindex="1" data-placeholder="Choose city" %}
		{{ form.city.errors }}
	</div>
	<div class="form-group">
		<label for="id_street">Street</label>
		{% render_field form.street class+="form-control street" tabindex="1" data-placeholder="Enter street" %}
		{{ form.street.errors }}
	</div>
	<div class="form-group">
		<label for="id_pincode">Pincode</label>
		{% render_field form.pincode class+="form-control pincode" tabindex="1" data-placeholder="Enter pincode" %}
		{{ form.pincode.errors }}
	</div>
	<div class="form-group">
		<label for="id_resource_center">Resource Center</label>
		{% render_field form.resource_center class+="form-control resource_center" tabindex="1" %}
		{{ form.resource_center.errors }}
	</div>
	<div class="form-group">
		<label for="id_rating">Ratings</label>
		{% render_field form.rating class+="form-control rating" tabindex="1" %}
		{{ form.rating.errors }}
	</div>
	<div class="form-group">
		<label for="id_contact_person">Contact Person</label>
		{% render_field form.contact_person class+="form-control contact_person" tabindex="1" data-placeholder="Contact details" %}
		{{ form.contact_person.errors }}
	</div>
	<div class="form-group">
		<label for="id_remarks">Remarks</label>
		{% render_field form.remarks class+="form-control remarks" tabindex="1" %}
		{{ form.remarks.errors }}
	</div>
	<div class="form-group">
		<label for="id_status">Status</label>
		{% render_field form.status class+="form-control status" tabindex="1" data-placeholder="Contact details" %}
		{{ form.status.errors }}
	</div>
	<input class="btn btn-primary" type="submit" value="Submit" />
</form>


{% endblock %}
{% block jsblock %}
	<script src="{% static 'spoken/js/chosen.jquery.min.js' %}"></script>
	<script type="text/javascript">
		$(".chosen").chosen({width: "100%"});
		$(".tutorial_name").chosen({width: "100%"});
		$(".language").chosen({width: "100%"});
	</script>
	<script>
		$(document).ready(function(){
			$acstate = $('.ac-state');
			$ac_university = $(".ac-university");
			$ac_district = $(".ac-district");
			$ac_city = $(".ac-city");
			$ac_location = $(".ac-location");
			$ac_pincode = $(".pincode");
			$acstate.attr("disabled");
			$acstate.change(function() {
				$("#similar-link").hide();
				var state = $(this).val();
				/* see thread-user.js */
				//$("#question-details-ok").show();
				$.ajax({
					url: "/events/ajax-ac-state/",
					type: "POST",
					data: {
						state: state
					},
					success: function(data) {
						if(data[0]){
							$ac_university.html(data[0]);
							$ac_university.removeAttr("disabled");
							$ac_university.trigger("chosen:updated");
						}else{
							$ac_university.html('<option>-- None -- </option>')
							$ac_university.attr("disabled", "disabled");
							$ac_university.trigger("chosen:updated");
							alert('No University found for this State!!');
						}
						if(data[1]){
							$ac_district.html(data[1]);
							$ac_district.trigger("chosen:updated");
							$ac_district.removeAttr("disabled");
						}else{
							$ac_district.html('<option>-- None -- </option>')
							$ac_district.trigger("chosen:updated");
							$ac_district.attr("disabled", "disabled");
							alert('No District found for this State!!');
						}
						if(data[2]){
							$ac_city.html(data[2]);
							$ac_city.trigger("chosen:updated");
							$ac_city.removeAttr("disabled");
						}else{
							$ac_city.html('<option>-- None -- </option>')
							$ac_city.trigger("chosen:updated");
							$ac_city.attr("disabled", "disabled");
							alert('No City found for this State!!');
						}
						//console.log("University = " + data[0]);
						//console.log("District = " + data[1]);
						//console.log("City = " + data[2]);
					}
				});
			});
			
			$ac_district.change(function(){
				var district = $(this).val();
				/* see thread-user.js */
				$.ajax({
					url: "/events/ajax-ac-location/",
					type: "POST",
					data: {
						district: district
					},
					success: function(data) {
						if(data){
							$ac_location.html(data);
							$ac_location.trigger("chosen:updated");
							$ac_location.removeAttr("disabled");
						}else{
							$ac_location.html('<option>-- None -- </option>')
							$ac_location.trigger("chosen:updated");
							$ac_location.attr("disabled", "disabled");
							alert('No Location found for this District!!');
						}
						//console.log(data);
					}
				});
			});
			
			$ac_location.change(function(){
				var location = $(this).val();
				/* see thread-user.js */
				$.ajax({
					url: "/events/ajax-ac-pincode/",
					type: "POST",
					data: {
						location: location
					},
					success: function(data) {
						if(data){
							$ac_pincode.val(data);
							$ac_pincode.removeAttr("disabled");
						}else{
							//$ac_pincode.attr("disabled", "disabled");
							alert('No pincode found for this Location!!');
						}
						//console.log(data);
					}
				});
			});
		});
	</script>
{% endblock %}

