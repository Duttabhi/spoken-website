{% extends 'spoken/templates/base.html' %}
{% load widget_tweaks %}
{% load static %}
{% load eventsdata %}
{% load cmsdata %}
{% load creationdata %}
{% block title %}Training / Workshop - {{ status}} {% endblock %}
{% block cssblock %}<link rel="stylesheet" href="{% static 'spoken/css/chosen.min.css' %}" type="text/css" media="screen" charset="utf-8" />{% endblock %}
{% block heading %}
        <i class="fa fa-list-ul"></i> Training / Workshop
{% endblock %}
{% block content %}
    <div class= 'filters' >
        <form action="" method="get" class='form-horizontal'>
            {% if not state %}
                <div class="form-group">
                    <label for="id_state" class="col-sm-2 control-label">State</label>
                    <div class="col-sm-10">
                        {% render_field form.academic__state class+="form-control chosen academic_state" tabindex="1" %}
                        {{ form.academic__state.errors }}
                    </div>
                </div>
            {% endif %}
	    <div class="form-group">
                <label for="id_academic_institution_type" class="col-sm-2 control-label">Institution Type</label>
                <div class="col-sm-10">
                    {% render_field form.academic__institution_type class+="form-control chosen academic_institution_type" tabindex="1" %}
                    {{ form.academic__institution_type.errors }}
                </div>
	    </div>
            <div class="form-group">
                <label for="id_training_type" class="col-sm-2 control-label">Training Type</label>
                <div class="col-sm-10">
                    {% render_field form.training_type class+="form-control chosen training_type" tabindex="1" %}
                    {{ form.training_type.errors }}
                </div>
            </div>
            <div class="form-group">
                <label for="id_city" class="col-sm-2 control-label">City/Town</label>
                <div class="col-sm-10">
                    {% render_field form.academic__city class+="form-control chosen academic_city" tabindex="1" %}
                    {{ form.academic__city.errors }}
                </div>
            </div>
                
            <div class="form-group">
                <label for="id_state" class="col-sm-2 control-label">Foss</label>
                <div class="col-sm-10">
                    {% render_field form.foss class+="form-control chosen foss" tabindex="1" %}
                    {{ form.foss.errors }}
                </div>
            </div>
            <div class="form-group">
                <label for="id_trdate" class="col-sm-2 control-label">Date Range</label>
                <div class="col-sm-10">
                    {% render_field form.trdate class+="form-control chosen trdate date" tabindex="1" %}
                    {{ form.trdate.errors }}
                </div>
            </div>
            <div class="form-group">
              <div class="col-sm-offset-2 col-sm-10">
                 <input class="btn btn-success" type="submit" value="Filter" />
                 <a class="btn btn-success" href="{{request.path}}?{{ request.GET|reset_get_values}}">Reset Filter</a>
              </div>
           </div>
        </form>
    </div>
	<div class="tab-content">
		<div class="tab-pane" id="new">
			<iframe width = "100%" src="/software-training/training/request/"></iframe> -->
		</div>
		<div class="tab-pane active" id="pending">
			{% if collection %}
			<div style="clear:both;">
			    <span class="pull-left">Total number of Workshop/Training : <b>{{ collection.paginator.count }}</b></span>
			    {% if participant_count %}
			        <span class="pull-right">Participants Count : <b>{{ participant_count.participant_counts__sum }}</b></span>
			    {% endif %}
			</div>
			<table class="paleblue table table-striped table-hover table-bordered">
				{% get_sortable_header header ordering request.GET %}
				{% for record in collection %}
					<tr>
                        <td>{{ forloop.counter }}
					    <!-- <td>
					        {% if record.training_type %}
					            Workshop - {{record.training_code}}
					        {% else %}
					            Training - {{record.training_code}}
					        {% endif %}
					    </td> -->
					    <td>{{ record.academic.state }}</td>
					    <td>{{ record.academic.city }}</td>
						<td>{{ record.academic }}</td>
						<td>{{ record.foss }}</td>
						<td>{{ record.organiser.user.first_name }}</td>
						<td>{{ record.trdate|date:"d M Y" }} {{ record.wtime }}</td>
						<td>{{ record.participant_counts }}</td>
                        <!-- actions based on roles -->
                        <td><a href="{% url 'statistics:statistics_training_participant' record.id %}">View Participants</a></td>
                    </tr>
                   {% endfor %}
                </table>
			{% else %}
				<p class='no-record'>No record found!</p>
			{% endif %}
		</div>
	</div>
{% endblock %}
