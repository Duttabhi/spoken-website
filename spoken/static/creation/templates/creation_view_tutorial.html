{% extends 'spoken/templates/base.html' %}
{% load widget_tweaks %}
{% load static %}
{% block cssblock %}
	<link href="{% static 'spoken/css/video-js.min.css' %}" rel="stylesheet" type="text/css">
	<style type="text/css">
		.video-js {
			padding-top: 56.25%
		}
		.vjs-fullscreen {
			padding-top: 0px;
		}
		.playlist-container{
		    background: #1a1a1a;
		    margin-bottom: 20px;
		}
		.description, .order {
		    font-size: 13px;
		}
		.forward {
		    float: right;
		}
		.playlist, .playlist-container, .video-container{
		    padding-left: 0px;
		    padding-right: 0px;
		}
		.playlist ul{
		    list-style:none;
		    padding-left: 0px;
		}
		.playlist ul .playlist-item{
		    clear: both;
		    overflow: hidden;
		}
		.playlist ul .playlist-item.active{
		    background: #3a3a3a;
		}
		.playlist ul .playlist-item a{
		    color: white;
		    display: block;
		    overflow: hidden;
		    padding: 15px 10px;
		}
		.playlist ul .playlist-item.active a{
		    color: orange;
		}
		.playlist ul .playlist-item:hover{
		    background: gray;
		}
		.playlist ul .playlist-item .thumb, .playlist ul .playlist-item .thumb .order{
		    padding-right: 10px;
		}
		.playlist-info{
		    color: white;
		    padding: 10px;
		    background: black;
		}
		.playlist-controls{
		    background: black;
		    border-top: 1px solid #3a3a3a;
		    padding: 10px 0;
		}
		.playlist-controls a{
		    color: white;
		}
		.playlist-controls span{
		    margin: 0 10px;
		}
        #content-wrapper #content-inner div.container{
            padding-left: 0px;
        }
	</style>
	<script src="{% static 'spoken/js/video.js' %}"></script>
{% endblock %}
{% load creationdata %}
{% block title %}{{ tr_rec.tutorial_detail.tutorial }} - {{ tr_rec.language.name }}{% endblock %}
{% block heading %}{{ tr_rec.tutorial_detail.tutorial }} - {{ tr_rec.language.name }}{% endblock %}
{% block content %}
    {% if tr_rec.video_status %}
    <row>
        <div class='container playlist-container col-lg-12 col-md-12 col-sm-12'>
            <div class="video-container col-lg-8 col-md-8 col-sm-8">
                <video id="st_video" class="video-js vjs-default-skin" controls preload="auto" width="auto" height="auto" data-setup="{}">
                    <source src="{{ media_url }}videos/{{ tr_rec.tutorial_detail.foss_id }}/{{ tr_rec.tutorial_detail_id }}/{{ tr_rec.video }}" type="video/ogg" />
                </video>
            </div>
            <div class='playlist col-lg-4 col-md-4 col-sm-4'>
                <div class='playlist-info'>
                    <h5>{{tr_rec.tutorial_detail.foss}} Tutorials - {{tr_rec.language}} <span class="video-count pull-right">{{tr_recs|length}}</span></h5>
                </div>
                <div class='playlist-controls'>
                    <span class='backward'></span>
                    <span class='forward'></span>
                </div>
                <ul>
                    {% for rec in tr_recs %}
                        <li class="playlist-item{% if tr_rec.id == rec.id %} active{% endif %}"{% if tr_rec.id == rec.id %} data="{{ forloop.counter }}"{% endif %}>
                            <a href="/creation/tutorial/view/{{ rec.id}}/">
                                <div class='pull-left thumb'>
                                    <span class='order'>{% if tr_rec.id == rec.id %}<i class="fa fa-play"></i>{% else %}{{ forloop.counter }}{% endif %}</span>
                                    <img src="http://www.spoken-tutorial.org/sites/default/files/thumb-even.png" width=70 >
                                </div>
                                <div class='description'>
                                    {{rec.tutorial_detail.tutorial}}
                                </div>
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </row>
    {% endif %}
    <row>
        <div class="col-lg-7 col-md-7 col-sm-7 no-padding-left">
            <pre>{{ tr_rec.outline }}</pre>
        </div>
        <div class="col-lg-5 col-md-5 col-sm-5 no-padding-right">
            <table class="table table-bordered table-hover col-lg-6">
                <tr>
                    <th>Codec:</th><td>{{video_info.codec}}</td>
                    <th>Profile:</th><td>{{video_info.profile}}</td>
                </tr>
                <tr>
                    <th>Width:</th><td>{{video_info.width}}</td>
                    <th>Height:</th><td>{{video_info.height}}</td>
                </tr>
                <tr>
                    <th>Duration:</th><td>{{video_info.duration}}</td>
                    <th>Size:</th><td>{{video_info.size}}</td>
                </tr>
            </table>
            <div class="script-link">
                
            </div>
        </div>
    </row>
{% endblock %}
{% block jsblock %}
    <script>
        currentVideo = $('.playlist-item.active');
        nextVideo = currentVideo.next('li');
        prevVideo = currentVideo.prev('li');
        var tmpHtml = currentVideo.attr('data') + '/' + $('.video-count').html()
        $('.video-count').html(tmpHtml)
        if(nextVideo.length){
            //console.log(nextVideo.children('a').attr('href'));
            $('.forward').html('<a href="'+nextVideo.children('a').attr('href')+'"><i class="fa fa-1 fa-fast-forward"></i></a>');
        } else {
            $('.forward').html('<i class="fa fa-1 fa-fast-forward"></i>');
        }
        if(prevVideo.length){
            //console.log(prevVideo.children('a').attr('href'));
            $('.backward').html('<a href="'+prevVideo.children('a').attr('href')+'"><i class="fa fa-1 fa-fast-backward"></i></a>');
        } else {
            $('.backward').html('<i class="fa fa-1 fa-fast-backward"></i>');
        }
        
    </script>
{% endblock %}
